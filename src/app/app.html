<div class="app-container">
  <!-- Layout condicional basado en autenticación -->
  @if (authService.isAuthenticated) {
    <!-- Barra superior -->
    <mat-toolbar color="primary" class="toolbar">
      <span class="app-title">ERP System</span>
      
      <div class="toolbar-spacer"></div>
      
      <span class="user-info">{{ (authService.currentUser$ | async)?.name || 'Usuario' }}</span>
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Cerrar Sesión</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <!-- Content with Sidebar -->
    <div class="content-with-sidebar" [class.sidebar-collapsed]="!sidebarService.isExpanded()">
      <app-sidebar></app-sidebar>
      <div class="main-content">
        <router-outlet />
      </div>
    </div>
  } @else {
    <!-- Login Page without sidebar -->
    <div class="login-content">
      <router-outlet />
    </div>
  }
</div>
